<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èš‚èšç¬”è¯•é¢˜</title>
</head>
<body>
    <div>
        
    </div>
    <script>
        //  ğŸŒ¹1.æ•°ç»„å»é‡ - å­˜åœ¨å­—ç¬¦ä¸²ï¼ˆè‡³å°‘ä¸‰ç§æ–¹æ³•ï¼‰
        //  [2, '2', 3, 4, 5, 5]
        function unque(callback, delay) {
           // å“ˆå¸Œ - new Map å­˜å‚¨key
           // éå†+åˆ¤æ–­ indexOf æ˜¯å¦ä¸€è‡´
           // new Set
        }
        
        // ğŸŒ¹2.äº‹ä»¶ç³»ç»Ÿ - ç½‘æ˜“æœ‰ç›¸ä¼¼çš„é¢˜
        // onã€offã€onceï¼ˆæ‰§è¡Œä¸€æ¬¡åä¸å†æ‰§è¡Œï¼‰ã€filterï¼ˆè¿‡æ»¤äº‹ä»¶ï¼‰
        class Events {
            constructor(){
                this.obj = {}
            }
            on(eventName, handler) {
                if(!this.obj[eventName]){
                    this.obj[eventName] = [handler];
                }else {
                    this.obj[eventName].push(handler);
                }
            }

            off(eventName, handler) {
                if(!this.obj[eventName]){
                    console.error('not exist.');
                }else {
                    this.obj[eventName] = null;
                }
            }

            trigger(eventName, args) {
                if(!this.obj[eventName]){
                    console.error('not exist.');
                }else {
                    // è¿ç”¨æ‰“å°1åˆ°10çš„é—®é¢˜
                    for(let i=0; i<this.obj[eventName].length; i++) {
                        this.obj[eventName][i](args);
                    }
                }
            }
        }
        



        // ğŸŒ¹3.ç®€å•å®ç°æ´‹è‘±æ¨¡å‹ï¼Œè®©è¾“å…¥å¯ä»¥æŒ‰åºè¾“å‡º
        // 1, 2, 3, mid, 1 end, 2 end, 3 end 
        async function fun1() {
            console.log('1');
            await next();
            console.log('1 end');
        }

        async function fun2() {
            console.log('2');
            await next();
            console.log('2 end');
        }
        
        async function fun3() {
            console.log('3');
            await next();
            console.log('3 end');
        }

        function fun4() {
            console.log('mid')
            new Promise((resolve) => {
                console.log('4');
                resolve();
            }).then(function() {
                console.log('5');
            })
        }


        
    </script>
</body>
</html>